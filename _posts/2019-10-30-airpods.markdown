---
layout: post
title:  "Noise Cancellation using Web Audio API"
date:   2019-10-30
categories:
---

Apple announced AirPods Pro, this time with noise cancellation feature,
so it made me sit down and write my own noise cancellation code.
So I want to write an app that disables the background noises, using 
javascript, and in practicular, `Web Audio API`.
For that, I would like to go back and implement some basic mandatory code first, and go over some basic audio processing how-to.


# How Sound Works

## FFT or DFT

[The Scientist and Engineer's Guide to
Digital Signal Processing By Steven W. Smith, Ph.D.](http://www.dspguide.com/) is by far the greatest souce for learning about digital signal processing. I learn from 10 years ago while I had zero knowledge about the subject, and now after reading throught it again I can see how clear it is. This book is a really good start for someone who would like to dive in and explore more on that subject.
For the lazy ones, here is a quick simulator to show "how sound works". The sound we're hearing is a wave, which we can see on the *Time Domain*. Each soundwave is composed of multiple frequencies. We can see the decomposition of these frequencis on the *Frequency Domain*. 
Inorder to convert the time domain to frequency domain, one use FFT, Fast Fourier Transform.
On compuers, we use DFT - Discrete Fourier Transfrom, since binary representation is after all, discrete. 




# How Noise Cancellation Works
The sound we hear is a wave.
Since waves can be accumulated, 
In the most basic way, noise cancellation works by
adding the negative amplitude to the original wave's amplutude, and there fore cancelling it.

There are few problems with that:
1. Processing time - how long does it take from the moment i 
sample the wave to produce the opposite wave.

# Advanced Method

Echo cancller

https://developers.google.com/web/updates/2017/12/disabling-hardware-noise-suppression
https://www.researchgate.net/publication/224066483_Quantile_based_noise_estimation_for_spectral_subtraction_and_Wiener_filtering
https://gordonlesti.com/a-audio-noise-filter-in-javascriptspeech-non-speech-classifcation/


https://developer.mozilla.org/en-US/docs/Web/API/MediaTrackSettings/noiseSuppression
https://developers.google.com/web/updates/2017/12/audio-worklet
https://webaudio.github.io/web-audio-api/#audioworklet
